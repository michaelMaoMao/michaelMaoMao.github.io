<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="TableView系列--知识点"><meta name="keywords" content="Docs"><meta name="author" content="MichaelMao"><meta name="copyright" content="MichaelMao"><title>TableView系列--知识点 | MMao</title><link rel="shortcut icon" href="/images/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitment/style/default.min.css"><script src="https://cdn.jsdelivr.net/npm/gitment/dist/gitment.browser.min.js"></script><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 7.3.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TableViewCell%E7%9F%A5%E8%AF%86%E9%87%8D%E7%82%B9"><span class="toc-number">1.</span> <span class="toc-text">TableViewCell知识重点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89TableViewCell"><span class="toc-number">1.1.</span> <span class="toc-text">创建自定义TableViewCell</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8-%E5%A6%82%E6%9E%9Cnib%EF%BC%8Cstoryboard%E5%92%8C-m%E6%96%87%E4%BB%B6%E4%B8%AD%E5%90%8C%E6%97%B6%E5%AD%98%E5%9C%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84cell%E7%9A%84%E8%AF%9D%EF%BC%8C%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8Fcell%E7%9A%84%E9%87%8D%E7%94%A8%E6%A0%87%E8%AF%86%E5%92%8C%E4%BB%A3%E7%A0%81%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%EF%BC%8C%E8%BF%99%E9%87%8C%E8%B4%B4%E4%B8%80%E5%BC%A0UIView%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9A"><span class="toc-number">1.1.1.</span> <span class="toc-text">注 如果nib，storyboard和.m文件中同时存在自定义的cell的话，需要注意cell的重用标识和代码的执行顺序，这里贴一张UIView的生命周期：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TableViewController%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">2.</span> <span class="toc-text">TableViewController注意点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UITableView%E9%87%8D%E8%A6%81%E7%9A%84API"><span class="toc-number">3.</span> <span class="toc-text">UITableView重要的API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%AE%9A%E9%AB%98%E5%BA%A6%EF%BC%88%E6%B3%A8%E6%84%8FestimatedHeightForRowAtIndexPath%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">3.1.</span> <span class="toc-text">设定高度（注意estimatedHeightForRowAtIndexPath方法）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Section%E7%9A%84%E5%A4%B4%E5%B0%BE"><span class="toc-number">3.1.1.</span> <span class="toc-text">Section的头尾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Selection%E9%80%89%E6%8B%A9%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.1.2.</span> <span class="toc-text">Selection选择事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E7%8A%B6%E6%80%81"><span class="toc-number">3.1.3.</span> <span class="toc-text">编辑状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E5%AE%9Acell%E7%9A%84%E7%84%A6%E7%82%B9"><span class="toc-number">3.1.4.</span> <span class="toc-text">设定cell的焦点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Data%E5%88%B7%E6%96%B0-%E5%88%B7%E6%96%B0%E5%8F%AF%E8%A7%81%E8%A1%8C%EF%BC%8CvisibleCell-%E5%9F%BA%E4%BA%8Ecell%E9%87%8D%E7%94%A8%E6%9C%BA%E5%88%B6"><span class="toc-number">3.1.5.</span> <span class="toc-text">Data刷新 (刷新可见行，visibleCell,基于cell重用机制)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E6%89%80%E5%AF%B9%E5%BA%94%E7%9A%84%E8%A7%86%E5%9B%BE%E5%85%B3%E7%B3%BB%E5%92%8C%E5%9D%90%E6%A0%87"><span class="toc-number">3.1.6.</span> <span class="toc-text">行所对应的视图关系和坐标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BB%9A%E5%8A%A8%E5%88%97%E8%A1%A8%E5%88%B0%E6%9F%90%E4%B8%80%E8%A1%8C%E6%88%96%E8%80%85%E4%B8%B4%E8%BF%91%E8%A1%8C"><span class="toc-number">3.1.7.</span> <span class="toc-text">滚动列表到某一行或者临近行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E7%9A%84%E6%8F%92%E5%85%A5%E3%80%81%E5%88%A0%E9%99%A4%E3%80%81%E5%88%B7%E6%96%B0"><span class="toc-number">3.1.8.</span> <span class="toc-text">行的插入、删除、刷新</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UITableView%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">UITableView的一些特性总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%B1%9E%E6%80%A7"><span class="toc-number">4.1.</span> <span class="toc-text">一、属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">二、方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">4.2.0.1.</span> <span class="toc-text">初始化方法：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E7%94%A8%E6%9C%BA%E5%88%B6%EF%BC%882%E4%B8%AA%EF%BC%89"><span class="toc-number">4.3.</span> <span class="toc-text">重用机制（2个）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E8%8C%83%E4%BE%8B"><span class="toc-number">4.3.1.</span> <span class="toc-text">调用范例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UITableViewDataSource%E4%BB%A3%E7%90%86%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">4.4.</span> <span class="toc-text">UITableViewDataSource代理方法：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E5%8D%9A%E6%96%87"><span class="toc-number">5.</span> <span class="toc-text">参考博文</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://pic-mike.oss-cn-hongkong.aliyuncs.com/Blog/avatar.png"></div><div class="author-info__name text-center">MichaelMao</div><div class="author-info__description text-center">stay on your way</div><div class="follow-button"><a href="https://github.com/FrizzleFur">Follow me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">40</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">14</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://juejin.im/user/57f8ffda2e958a005581e3c0/posts">J_Knight</a><a class="author-info-links__name text-center" href="https://halfrost.com/">Halfrost</a><a class="author-info-links__name text-center" href="https://github.com/draveness/analyze">draveness</a><a class="author-info-links__name text-center" href="https://juejin.im/user/5a52075e6fb9a01c9d31b107/posts">老司机周报</a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">MMao</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/ideas">思所</a><a class="site-page" href="/booknotes">读书</a><a class="site-page" href="/about">关于</a><a class="site-page" href="/gallery">相册</a><a class="site-page" href="/gtd">GTD</a></span></div><div id="post-info"><div id="post-title">TableView系列--知识点</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-09-06</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p><strong>变更记录</strong></p>
<p>序号 |  	录入时间 | 备注<br> — | — |  — | —<br>1	| 2016-09-06 | 新建文章<br>2	| 2018-04-14 | 合并整理<br>3	| 2018-05-29 | 整理目录</p>
<h2 id="TableViewCell知识重点"><a href="#TableViewCell知识重点" class="headerlink" title="TableViewCell知识重点"></a>TableViewCell知识重点</h2><p>每个<code>TableViewCell</code>里带一个<code>contentView</code>，cell的textLabel和imageView都是加载在<code>contentView</code>里的，所以以后要在cell上添加控件最好在<code>contentView</code>上添加，以免不必要的错误。</p>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112532766256.png" alt="contentView.png"></p>
<h3 id="创建自定义TableViewCell"><a href="#创建自定义TableViewCell" class="headerlink" title="创建自定义TableViewCell"></a>创建自定义<code>TableViewCell</code></h3><ol>
<li>首先调用<code>cellForRowAtIndexPath</code>方法，如果是加载nib可以在<code>ViewDidLoad</code>中先注册nib文件的cell：</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UINib</span> * nib = [<span class="built_in">UINib</span> nibWithNibName:<span class="built_in">NSStringFromClass</span>([MZTableViewCell <span class="keyword">class</span>])  bundle:<span class="literal">nil</span>];</span><br><span class="line">       [<span class="keyword">self</span>.tableView registerNib:nib forCellReuseIdentifier:<span class="string">@&quot;mzCellNib&quot;</span>];</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>然后从缓存池里查找</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *reuseID = <span class="string">@&quot;mzCellNib&quot;</span>;</span><br><span class="line">  MZTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseID];</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>如果<code>storyboard</code>中有cell的话，设置<code>storyboard</code>中cell的重用标识，在缓存池中也能找到：</li>
</ol>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/storyboard%E8%AE%BE%E7%BD%AEcell.png" alt="storyboard设置cell.png"></p>
<span id="more"></span>

<ol start="4">
<li>如果缓存池没有，storyboard里面也木有这样标识的cell的话就有两种方式来创建：</li>
</ol>
<p>4.1 创建一个继承自<code>UITableViewCell</code>的子类，比<code>MZTableViewCell</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (cell == <span class="literal">nil</span>) &#123;</span><br><span class="line">	cell = [[MZTableViewCell alloc] initWithStyle:<span class="built_in">UITableViewCellStyleSubtitle</span> reuseIdentifier:reuseID];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.2 也可以自己创建cell:从Nib里加载cell</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (cell == <span class="literal">nil</span>) &#123;</span><br><span class="line"> <span class="comment">//加载xib文件加载cell，方法放回的是一个数组，取最后一个对象 </span></span><br><span class="line"> cell = [[[<span class="built_in">NSBundle</span> mainBundle loadNibNamed:<span class="built_in">NSStringFromClass</span>([MZTableViewCell <span class="keyword">class</span>]) owner:<span class="literal">nil</span> options:<span class="literal">nil</span>] lastObject];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="注-如果nib，storyboard和-m文件中同时存在自定义的cell的话，需要注意cell的重用标识和代码的执行顺序，这里贴一张UIView的生命周期："><a href="#注-如果nib，storyboard和-m文件中同时存在自定义的cell的话，需要注意cell的重用标识和代码的执行顺序，这里贴一张UIView的生命周期：" class="headerlink" title="注 如果nib，storyboard和.m文件中同时存在自定义的cell的话，需要注意cell的重用标识和代码的执行顺序，这里贴一张UIView的生命周期："></a>注 如果nib，<code>storyboard</code>和.m文件中同时存在自定义的cell的话，需要注意cell的重用标识和代码的执行顺序，这里贴一张<code>UIView</code>的生命周期：</h4><p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112533797755.png" alt="viewLifeCycle.png"></p>
<h2 id="TableViewController注意点"><a href="#TableViewController注意点" class="headerlink" title="TableViewController注意点"></a><code>TableViewController</code>注意点</h2><ul>
<li><p><code>TableViewController</code>中自带了一个tableView，继承了代理和数据源协议。其中的<code>self.view</code>和<code>self.tableView</code>都指的是所自带的tableView。</p>
</li>
<li><p><code>TableViewController</code>还有一个<code>UIRefreshControl</code>，可以用来实现下拉刷新的效果。</p>
</li>
<li><p><code>UIRefreshControl</code>使用非常简单，但是必须是在<code>UITableViewController</code>子类使用，而不能在<code>UIViewController</code>子类中使用。例如<code>CustomViewController</code>继承自<code>UIViewController</code>，那么就不能使用<code>UIRefreshControl</code>。</p>
</li>
<li><p><code>UIRefreshControl</code>使用很简单，如下代码，<code>RootTableViewController</code>继承自<code>UITableViewController</code>，</p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RootTaleiewController.h </span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">RootTableViewController</span>:<span class="title">UITableViewController</span></span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="comment">//RootTableViewController.m file</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">RootTableViewController</span>()</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">RootTableViewController</span></span></span><br><span class="line"><span class="comment">//省略不相干代码</span></span><br><span class="line"> </span><br><span class="line">- (<span class="type">void</span>)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="variable language_">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">//初始化UIRefreshControl</span></span><br><span class="line">    <span class="built_in">UIRefreshControl</span> *refreshControl = [[<span class="built_in">UIRefreshControl</span> alloc] init];</span><br><span class="line">    [refreshControl addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(refresh:) forControlEvents:<span class="built_in">UIControlEventValueChanged</span>];</span><br><span class="line">    [<span class="keyword">self</span> setRefreshControl:refreshControl];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解释一下下面的代码：</p>
<p>当用户向下下拉刷新的时候，refresh触发，这时候请求url链接中的内容。这里使用<code>AFNetworking</code>来解析，代码块中的内容就是解析成功之后，设置数据源self.tweets中的内容，然后刷新<code>UITableView</code>界面，然后向<code>UIRefreshControl</code>对象发送<code>endRefreshing</code>消息，停止<code>UIRefreshControl</code>的动画效果。如果失败的话，也要停止<code>UIRefreshControl</code>的动画效果。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)refresh:(<span class="type">id</span>)sender</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;http://search.twitter.com/search.json?q=ios%20development&amp;rpp=100&amp;include_entities=true&amp;result_type=mixed/&quot;</span>];</span><br><span class="line">    <span class="comment">// Initialize URL Request</span></span><br><span class="line">    <span class="built_in">NSURLRequest</span> *urlRequest = [[<span class="built_in">NSURLRequest</span> alloc] initWithURL:url];</span><br><span class="line">    <span class="comment">// JSON Request Operation</span></span><br><span class="line">    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:urlRequest success:^(<span class="built_in">NSURLRequest</span> *request, <span class="built_in">NSHTTPURLResponse</span> *response, <span class="type">id</span> JSON) &#123;</span><br><span class="line">        <span class="built_in">NSArray</span> *results = [(<span class="built_in">NSDictionary</span> *)JSON objectForKey:<span class="string">@&quot;results&quot;</span>];</span><br><span class="line">        <span class="keyword">if</span> ([results count]) &#123;</span><br><span class="line">            <span class="keyword">self</span>.tweets = results;</span><br><span class="line">            <span class="comment">// Reload Table View</span></span><br><span class="line">            [<span class="keyword">self</span>.tableView reloadData];</span><br><span class="line">            <span class="comment">// End Refreshing</span></span><br><span class="line">            [(<span class="built_in">UIRefreshControl</span> *)sender endRefreshing];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; failure:^(<span class="built_in">NSURLRequest</span> *request, <span class="built_in">NSHTTPURLResponse</span> *response, <span class="built_in">NSError</span> *error, <span class="type">id</span> JSON) &#123;</span><br><span class="line">        <span class="comment">// End Refreshing</span></span><br><span class="line">        [(<span class="built_in">UIRefreshControl</span> *)sender endRefreshing];</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">// Start Operation</span></span><br><span class="line">    [operation start];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<h2 id="UITableView重要的API"><a href="#UITableView重要的API" class="headerlink" title="UITableView重要的API"></a>UITableView重要的API</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">UITableViewDelegate</span>&lt;<span class="title">NSObject</span>, <span class="title">UIScrollViewDelegate</span>&gt;</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line"><span class="comment">// Display customization 这里是展示cell的时候的回调</span></span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView willDisplayCell:(<span class="built_in">UITableViewCell</span> *)cell forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView willDisplayHeaderView:(<span class="built_in">UIView</span> *)view forSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView willDisplayFooterView:(<span class="built_in">UIView</span> *)view forSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didEndDisplayingCell:(<span class="built_in">UITableViewCell</span> *)cell forRowAtIndexPath:(<span class="built_in">NSIndexPath</span>*)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didEndDisplayingHeaderView:(<span class="built_in">UIView</span> *)view forSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didEndDisplayingFooterView:(<span class="built_in">UIView</span> *)view forSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br></pre></td></tr></table></figure>

<h3 id="设定高度（注意estimatedHeightForRowAtIndexPath方法）"><a href="#设定高度（注意estimatedHeightForRowAtIndexPath方法）" class="headerlink" title="设定高度（注意estimatedHeightForRowAtIndexPath方法）"></a>设定高度（注意estimatedHeightForRowAtIndexPath方法）</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Variable height support</span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForHeaderInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForFooterInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line"><span class="comment">// Use the estimatedHeight methods to quickly calcuate guessed values which will allow for fast load times of the table.</span></span><br><span class="line"><span class="comment">// If these methods are implemented, the above -tableView:heightForXXX calls will be deferred until views are ready to be displayed, so more expensive logic can be placed there.</span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView estimatedHeightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">7</span>_0);</span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView estimatedHeightForHeaderInSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">7</span>_0);</span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView estimatedHeightForFooterInSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">7</span>_0);</span><br></pre></td></tr></table></figure>

<h4 id="Section的头尾"><a href="#Section的头尾" class="headerlink" title="Section的头尾"></a>Section的头尾</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Section header &amp; footer information. Views are preferred over title should you decide to provide both</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">UIView</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView viewForHeaderInSection:(<span class="built_in">NSInteger</span>)section;   <span class="comment">// custom view for header. will be adjusted to default or specified header height</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">UIView</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView viewForFooterInSection:(<span class="built_in">NSInteger</span>)section;   <span class="comment">// custom view for footer. will be adjusted to default or specified footer height</span></span><br></pre></td></tr></table></figure>

<h4 id="Selection选择事件"><a href="#Selection选择事件" class="headerlink" title="Selection选择事件"></a>Selection选择事件</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Selection</span></span><br><span class="line"><span class="comment">// -tableView:shouldHighlightRowAtIndexPath: is called when a touch comes down on a row. </span></span><br><span class="line"><span class="comment">// Returning NO to that message halts the selection process and does not cause the currently selected row to lose its selected look while the touch is down.</span></span><br><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView shouldHighlightRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didHighlightRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didUnhighlightRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line"><span class="comment">// Called before the user changes the selection. Return a new indexPath, or nil, to change the proposed selection.</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSIndexPath</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView willSelectRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSIndexPath</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView willDeselectRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">3</span>_0);</span><br><span class="line"><span class="comment">// Called after the user changes the selection.</span></span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didSelectRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didDeselectRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">3</span>_0);</span><br></pre></td></tr></table></figure>

<h4 id="编辑状态"><a href="#编辑状态" class="headerlink" title="编辑状态"></a>编辑状态</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Editing</span></span><br><span class="line"><span class="comment">// Allows customization of the editingStyle for a particular cell located at &#x27;indexPath&#x27;. If not implemented, all editable cells will have UITableViewCellEditingStyleDelete set for them when the table has editing property set to YES.</span></span><br><span class="line">- (<span class="built_in">UITableViewCellEditingStyle</span>)tableView:(<span class="built_in">UITableView</span> *)tableView editingStyleForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSString</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">3</span>_0) __TVOS_PROHIBITED;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSArray</span>&lt;<span class="built_in">UITableViewRowAction</span> *&gt; *)tableView:(<span class="built_in">UITableView</span> *)tableView editActionsForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">8</span>_0) __TVOS_PROHIBITED; <span class="comment">// supercedes -tableView:titleForDeleteConfirmationButtonForRowAtIndexPath: if return value is non-nil</span></span><br><span class="line"><span class="comment">// Controls whether the background is indented while editing.  If not implemented, the default is YES.  This is unrelated to the indentation level below.  This method only applies to grouped style table views.</span></span><br><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView shouldIndentWhileEditingRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"><span class="comment">// The willBegin/didEnd methods are called whenever the &#x27;editing&#x27; property is automatically changed by the table (allowing insert/delete/move). This is done by a swipe activating a single row</span></span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span>*)tableView willBeginEditingRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath __TVOS_PROHIBITED;</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span>*)tableView didEndEditingRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath __TVOS_PROHIBITED;</span><br></pre></td></tr></table></figure>

<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112536467876.png" alt="Calling sequence for reordering a row in a table view.png"></p>
<p>上图中当tableView进入到edit模式的时候，tableView会去对当前可见的cell逐个调用dataSource的<code>tableView:canMoveRowAtIndexPath</code>:方法(此处官方给出的流程图有点儿问题)，决定当前cell是否显示recordering控件，当开始进入拖动cell进行拖动的时候，每滑动过一个cell的时候，会去调用delegate的<code>tableView:targetIndexPathForMoveFromRowAtIndexPath:toProposedIndexPath:</code>方法，去判断当前划过的cell位置是否可以被替换，如果不行则给出建议的位置。当用户放手时本次reordering操作结束，调用dataSource中的tableView:moveRowAtIndexPath:toIndexPath:方法更新tableView对应的数据。</p>
<p>当tableView进入编辑模式以后，cell上面显示的delete还是insert除了跟cell的editStyle有关，还与 tableView的delegate的<code>tableView:editingStyleForRowAtIndexPath</code>:方法的返回值有关(在这里唠叨一句，其实delegate提供了很多改变cell属性的机会，如非必要，还是不要去实现这些方法，因为执行这些方法也造成一定的开销)。</p>
<p>delete和insert的流程如下苹果官方文档中给出的图所示：</p>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112538811489.png" alt="Calling_sequence_for_inserting_or_deleting_rows_in_a_table_view.png"><br>定义长按cell的copy和paste</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// Copy/Paste.  All three methods must be implemented by the delegate.</span></span><br><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView shouldShowMenuForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">5</span>_0);</span><br><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath withSender:(<span class="keyword">nullable</span> <span class="type">id</span>)sender <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">5</span>_0);</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView performAction:(SEL)action forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath withSender:(<span class="keyword">nullable</span> <span class="type">id</span>)sender <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">5</span>_0);</span><br></pre></td></tr></table></figure>

<h4 id="设定cell的焦点"><a href="#设定cell的焦点" class="headerlink" title="设定cell的焦点"></a>设定cell的焦点</h4><p>使用Apple TV遥控器控制屏幕上的用户界面 &#x3D; &#x3D;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Focus</span></span><br><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView canFocusRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">9</span>_0);</span><br><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView shouldUpdateFocusInContext:(<span class="built_in">UITableViewFocusUpdateContext</span> *)context <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">9</span>_0);</span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didUpdateFocusInContext:(<span class="built_in">UITableViewFocusUpdateContext</span> *)context withAnimationCoordinator:(<span class="built_in">UIFocusAnimationCoordinator</span> *)coordinator <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">9</span>_0);</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSIndexPath</span> *)indexPathForPreferredFocusedViewInTableView:(<span class="built_in">UITableView</span> *)tableView <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">9</span>_0);</span><br></pre></td></tr></table></figure>

<h4 id="Data刷新-刷新可见行，visibleCell-基于cell重用机制"><a href="#Data刷新-刷新可见行，visibleCell-基于cell重用机制" class="headerlink" title="Data刷新 (刷新可见行，visibleCell,基于cell重用机制)"></a>Data刷新 (刷新可见行，visibleCell,基于cell重用机制)</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Data</span></span><br><span class="line">- (<span class="type">void</span>)reloadData; <span class="comment">// reloads everything from scratch. redisplays visible rows. because we only keep info about visible rows, this is cheap. will adjust offset if table shrinks</span></span><br><span class="line">- (<span class="type">void</span>)reloadSectionIndexTitles <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">3</span>_0);   <span class="comment">// reloads the index bar.</span></span><br></pre></td></tr></table></figure>

<h4 id="行所对应的视图关系和坐标"><a href="#行所对应的视图关系和坐标" class="headerlink" title="行所对应的视图关系和坐标"></a>行所对应的视图关系和坐标</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSInteger</span> numberOfSections;</span><br><span class="line">- (<span class="built_in">NSInteger</span>)numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line">- (<span class="built_in">CGRect</span>)rectForSection:(<span class="built_in">NSInteger</span>)section;                                    <span class="comment">// includes header, footer and all rows</span></span><br><span class="line">- (<span class="built_in">CGRect</span>)rectForHeaderInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line">- (<span class="built_in">CGRect</span>)rectForFooterInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line">- (<span class="built_in">CGRect</span>)rectForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSIndexPath</span> *)indexPathForRowAtPoint:(<span class="built_in">CGPoint</span>)point;                         <span class="comment">// returns nil if point is outside of any row in the table</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSIndexPath</span> *)indexPathForCell:(<span class="built_in">UITableViewCell</span> *)cell;                      <span class="comment">// returns nil if cell is not visible</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPathsForRowsInRect:(<span class="built_in">CGRect</span>)rect;                              <span class="comment">// returns nil if rect not valid</span></span><br><span class="line">- (<span class="keyword">nullable</span> __kindof <span class="built_in">UITableViewCell</span> *)cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;   <span class="comment">// returns nil if cell is not visible or index path is out of range</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSArray</span>&lt;__kindof <span class="built_in">UITableViewCell</span> *&gt; *visibleCells;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">nullable</span>) <span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *indexPathsForVisibleRows;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">UITableViewHeaderFooterView</span> *)headerViewForSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">UITableViewHeaderFooterView</span> *)footerViewForSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br></pre></td></tr></table></figure>

<h4 id="滚动列表到某一行或者临近行"><a href="#滚动列表到某一行或者临近行" class="headerlink" title="滚动列表到某一行或者临近行"></a>滚动列表到某一行或者临近行</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)scrollToRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath atScrollPosition:(<span class="built_in">UITableViewScrollPosition</span>)scrollPosition animated:(<span class="type">BOOL</span>)animated;</span><br><span class="line">- (<span class="type">void</span>)scrollToNearestSelectedRowAtScrollPosition:(<span class="built_in">UITableViewScrollPosition</span>)scrollPosition animated:(<span class="type">BOOL</span>)animated;</span><br></pre></td></tr></table></figure>

<h4 id="行的插入、删除、刷新"><a href="#行的插入、删除、刷新" class="headerlink" title="行的插入、删除、刷新"></a>行的插入、删除、刷新</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Row insertion/deletion/reloading.</span></span><br><span class="line">- (<span class="type">void</span>)beginUpdates;   <span class="comment">// allow multiple insert/delete of rows and sections to be animated simultaneously. Nestable</span></span><br><span class="line">- (<span class="type">void</span>)endUpdates;     <span class="comment">// only call insert/delete/reload calls or change the editing state inside an update block.  otherwise things like row count, etc. may be invalid.</span></span><br><span class="line">- (<span class="type">void</span>)insertSections:(<span class="built_in">NSIndexSet</span> *)sections withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation;</span><br><span class="line">- (<span class="type">void</span>)deleteSections:(<span class="built_in">NSIndexSet</span> *)sections withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation;</span><br><span class="line">- (<span class="type">void</span>)reloadSections:(<span class="built_in">NSIndexSet</span> *)sections withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">3</span>_0);</span><br><span class="line">- (<span class="type">void</span>)moveSection:(<span class="built_in">NSInteger</span>)section toSection:(<span class="built_in">NSInteger</span>)newSection <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">5</span>_0);</span><br><span class="line">- (<span class="type">void</span>)insertRowsAtIndexPaths:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPaths withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation;</span><br><span class="line">- (<span class="type">void</span>)deleteRowsAtIndexPaths:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPaths withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation;</span><br><span class="line">- (<span class="type">void</span>)reloadRowsAtIndexPaths:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPaths withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">3</span>_0);</span><br><span class="line">- (<span class="type">void</span>)moveRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath toIndexPath:(<span class="built_in">NSIndexPath</span> *)newIndexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">5</span>_0);</span><br></pre></td></tr></table></figure>

<h2 id="UITableView的一些特性总结"><a href="#UITableView的一些特性总结" class="headerlink" title="UITableView的一些特性总结"></a>UITableView的一些特性总结</h2><h3 id="一、属性"><a href="#一、属性" class="headerlink" title="一、属性"></a>一、属性</h3><ul>
<li>dataSource —设置UITableViewDataSource的代理</li>
<li>delegate —设置UItableViewDelegate的代理</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*当header、footer、cell的高度是固定值的话，用该方法直接设置表的高度，无需调用表的delegate方法设置它们的高度 eg:_table.rowHeight = 60 */</span>  </span><br><span class="line"><span class="comment">/*sectionHeaderHeight、sectionFooterHeight、rowHeight -- 设置表头、尾、cell的高度</span></span><br><span class="line"><span class="comment">sectionIndexColor -- 设置sectionIndexTitle（表索引子母）的颜色 */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">NSInteger</span> sectionIndexMinimumDisplayRowCount;                                                      <span class="comment">// show special section index list on right when row count reaches this value. default is 0  </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">nullable</span>) <span class="built_in">UIColor</span> *sectionIndexColor <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0) <span class="built_in">UI_APPEARANCE_SELECTOR</span>;                   <span class="comment">// color used for text of the section index  </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">nullable</span>) <span class="built_in">UIColor</span> *sectionIndexBackgroundColor <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">7</span>_0) <span class="built_in">UI_APPEARANCE_SELECTOR</span>;         <span class="comment">// the background color of the section index while not being touched  </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">nullable</span>) <span class="built_in">UIColor</span> *sectionIndexTrackingBackgroundColor <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0) <span class="built_in">UI_APPEARANCE_SELECTOR</span>; <span class="comment">// the background color of the section index while it is being touched  </span></span><br><span class="line">估算元素的高度 <span class="comment">// NS_AVAILABLE_IOS(7_0)</span></span><br><span class="line">[objc] view plain <span class="keyword">copy</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">   连接文章 介绍了estimatedRowHeight的用的场景。（适用动态的cell.height的适配） </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line">理解iOS <span class="number">8</span>中的Self Sizing Cells和Dynamic Type</span><br><span class="line">estimatedRowHeight   ---  设置表格行的估算高度以改善性能</span><br><span class="line">estimatedSectionHeaderHeight、estimatedSectionFooterHeight   -----  设置Section头和Section尾估算高度以改善性能</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView estimatedHeightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">7</span>_0);  </span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView estimatedHeightForHeaderInSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">7</span>_0);  </span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView estimatedHeightForFooterInSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">7</span>_0);  </span><br><span class="line">separatorEffect  -------- 表的分割线（毛玻璃效果）<span class="comment">//默认的分割线的色调暗</span></span><br></pre></td></tr></table></figure>

<p>效果图：<br><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112546665974.jpg"></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImageView</span> *backImageView = [[<span class="built_in">UIImageView</span> alloc] initWithImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@&quot;4.jpg&quot;</span>]]; </span><br><span class="line">    <span class="keyword">self</span>.myTableView.backgroundView = backImageView; </span><br><span class="line">    <span class="built_in">UIBlurEffect</span> *blureffect = [<span class="built_in">UIBlurEffect</span> effectWithStyle:<span class="built_in">UIBlurEffectStyleDark</span>]; </span><br><span class="line">    <span class="built_in">UIVibrancyEffect</span> *vinb = [<span class="built_in">UIVibrancyEffect</span> effectForBlurEffect:blureffect]; </span><br><span class="line">    <span class="keyword">self</span>.myTableView.separatorEffect = vinb; </span><br><span class="line">    <span class="comment">//cell.backgroundColor = [UIColor clearColor];</span></span><br></pre></td></tr></table></figure>

<h3 id="二、方法"><a href="#二、方法" class="headerlink" title="二、方法"></a>二、方法</h3><h5 id="初始化方法："><a href="#初始化方法：" class="headerlink" title="初始化方法："></a>初始化方法：</h5><ul>
<li>initWithFrame：———–设置表的大小和位置</li>
<li>initWithFrame：style———设置表的大小，位置和样式（组，单一）</li>
<li>setEditing：———-表格进入编辑状态，无动画</li>
<li>setEditing： animated：———表格进入编辑状态，有动画</li>
<li>reloadData—————刷新整个表视图</li>
<li>reloadSectionIndexTitles——–刷新索引栏</li>
<li>numberOfSections———–获取当前所有的组</li>
<li>numberOfRowsInSection：———获取某个组有多少行</li>
<li>rectForSection：———-获取某个组的位置和大小</li>
<li>rectForHeaderInSection：———获取某个组的头标签的位置和大小</li>
<li>rectForFooterInSection：———–获取某个组的尾标签的位置和大小</li>
<li>rectForRowAtIndex：———–获取某一行的位置和大小</li>
<li>indexPathForRowAtPoint————-点击某一个点，判断是在哪一行上的信息。</li>
<li>indexPathForCell：————获取单元格的信息</li>
<li>indexPathsForRowsInRect：———在某个区域里会返回多个单元格信息</li>
<li>cellForRowAtIndexPath：————-通过单元格路径得到单元格</li>
<li>visibleCells———–返回所有可见的单元格</li>
<li>indexPathsForVisibleRows——–返回所有可见行的路径</li>
<li>headerViewForSection：——–设置头标签的视图</li>
<li>footerViewForSection；———-设置尾标签的视图</li>
<li>UITableViewHeaderFooterView的使用说明</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">UITableViewHeaderFooterView</span> *)headerViewForSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);  </span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">UITableViewHeaderFooterView</span> *)footerViewForSection:(<span class="built_in">NSInteger</span>)section <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UIView</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView viewForHeaderInSection:(<span class="built_in">NSInteger</span>)section  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">NSString</span> *HeaderIdentifier = <span class="string">@&quot;header&quot;</span>;  </span><br><span class="line">    <span class="comment">//表头、尾UITableViewHeaderFooterView的重用机制  </span></span><br><span class="line">    <span class="comment">//CustomHeaderView *myHeader = [tableView dequeueReusableHeaderFooterViewWithIdentifier:HeaderIdentifier];  </span></span><br><span class="line">    <span class="keyword">if</span>(!myHeader) &#123;  </span><br><span class="line">    <span class="comment">//    [tableView registerClass:[CustomHeaderView class] forHeaderFooterViewReuseIdentifier:HeaderIdentifier];  </span></span><br><span class="line">        myHeader = [[[<span class="built_in">NSBundle</span> mainBundle] loadNibNamed:<span class="string">@&quot;CustomHeaderView&quot;</span>  </span><br><span class="line">                                                  owner:<span class="keyword">self</span>  </span><br><span class="line">                                                options:<span class="literal">nil</span>] objectAtIndex:<span class="number">0</span>];  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    [myHeader.btnSomething setTitle:<span class="string">@&quot;-&quot;</span> forState:<span class="built_in">UIControlStateNormal</span>];  </span><br><span class="line">    [myHeader.lblSomething setText:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;Section: %d&quot;</span>,section]];  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> myHeader;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didSelectRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath  </span><br><span class="line">&#123;  </span><br><span class="line">    CustomHeaderView *theHeaderView = (CustomHeaderView*)[tableView &lt;span style=<span class="string">&quot;color:#FF0000;&quot;</span>&gt;headerViewForSection&lt;/span&gt;:indexPath.section];  </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,theHeaderView);  </span><br><span class="line">  </span><br><span class="line">    [theHeaderView.lblSomething setAlpha:theHeaderView.lblSomething.alpha<span class="number">-0.1</span>];  </span><br><span class="line">    [theHeaderView.btnSomething setTitle:<span class="string">@&quot;+&quot;</span> forState:<span class="built_in">UIControlStateNormal</span>];  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="重用机制（2个）"><a href="#重用机制（2个）" class="headerlink" title="重用机制（2个）"></a>重用机制（2个）</h3><p><code>dequeueReusableCellWithI dentifier：</code>——— 获取重用队列里的cell单元格</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**&lt; 使用这个方法之前必须是使用了registerNib:forCellReuseIdentifier:&lt;span&gt;或者&lt;/span&gt;registerClass:forCellReuseIdentifier:方法注册了Cell </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line">dequeueReusableHeaderFooterViewWithIdentifier   -------获取重用队列里的<span class="built_in">UITableViewHeaderFooterView</span>的单元格</span><br></pre></td></tr></table></figure>
<p>注册一个包含指定标示符的cell or haderFooterView 的nib对象&#x2F;类</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)registerNib:(<span class="keyword">nullable</span> <span class="built_in">UINib</span> *)nib forCellReuseIdentifier:(<span class="built_in">NSString</span> *)identifier <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">5</span>_0);  </span><br><span class="line">- (<span class="type">void</span>)registerClass:(<span class="keyword">nullable</span> Class)cellClass forCellReuseIdentifier:(<span class="built_in">NSString</span> *)identifier <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)registerNib:(<span class="keyword">nullable</span> <span class="built_in">UINib</span> *)nib forHeaderFooterViewReuseIdentifier:(<span class="built_in">NSString</span> *)identifier <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);  </span><br><span class="line">- (<span class="type">void</span>)registerClass:(<span class="keyword">nullable</span> Class)aClass forHeaderFooterViewReuseIdentifier:(<span class="built_in">NSString</span> *)identifier <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br></pre></td></tr></table></figure>

<p>  <code>beginUpdates</code> 和 <code>endUpdates</code>两个方法，是配合起来使用的，标记了一个<code>tableView</code>的动画块。分别代表动画的开始开始和结束。两者成对出现，可以嵌套使用。<br>  一般，在添加，删除，选择 tableView中使用，并实现动画效果。在动画块内，不建议使用reloadData方法，如果使用，会影响动画。 </p>
<h4 id="调用范例"><a href="#调用范例" class="headerlink" title="调用范例"></a>调用范例</h4><ul>
<li>beginUpdates——–只添加或删除才会更新行数</li>
<li>endUpdates———添加或删除后会调用添加或删除方法时才会更新</li>
<li>insertSections：withRowAnimation：———–插入一个或多个组，并使用动画</li>
<li>insertRowsIndexPaths：withRowAnimation：——-插入一个或多个单元格，并使用动画</li>
<li>deleteSections：withRowAnimation：——–删除一个或多个组，并使用动画</li>
<li>deleteRowIndexPaths：withRowAnimation：——–删除一个或多个单元格，并使用动画</li>
<li>reloadSections：withRowAnimation：———更新一个或多个组，并使用动画</li>
<li>reloadRowIndexPaths：withRowAnimation：————-更新一个或多个单元格，并使用动画</li>
<li>moveSection：toSection：————-移动某个组到目标组位置</li>
<li>moveRowAtIndexPath：toIndexPath：———–移动个某个单元格到目标单元格位置</li>
<li>indexPathsForSelectedRow———-返回选择的一个单元格的路径</li>
<li>indexPathsForSelectedRows———返回选择的所有的单元格的路径</li>
<li>selectRowAtIndexPath：animation：scrollPosition———设置选中某个区域内的单元格 </li>
<li>deselectRowAtIndexPath：animation：———-取消选中的单元格</li>
</ul>
<h3 id="UITableViewDataSource代理方法："><a href="#UITableViewDataSource代理方法：" class="headerlink" title="UITableViewDataSource代理方法："></a>UITableViewDataSource代理方法：</h3><ul>
<li>numberOfSectionsInTableView：————设置表格的组数</li>
<li>tableView：numberOfRowInSection：———-设置每个组有多少行</li>
<li>tableView：cellForRowAtIndexPath：———设置单元格显示的内容</li>
<li>tableView：titleForHeaderInSection：———设置组表的头标签视图</li>
<li>tableView：titleForFooterInSection：———–设置组表的尾标签视图</li>
<li>tableView：canEditRowAtIndexPath：———设置单元格是否可以编辑</li>
<li>tableView：canMoveRowAtIndexPath：——–设置单元格是否可以移动</li>
<li>tableView：sectionIndexTitleForTableView：atIndex：——-设置指定组的表的头标签文本</li>
<li>tableView：commitEditingStyle：forRowAtIndexPath：———-编辑单元格（添加，删除）</li>
<li>tableView：moveRowAtIndexPath：toIndexPath      ——- 单元格移动</li>
<li>tableView：indentationLevelForRowAtIndexPath ——- 返回行层次的深度</li>
</ul>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112546510782.jpg"></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">- (NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath </span></span><br><span class="line"><span class="comment">&#123; </span></span><br><span class="line"><span class="comment">    return [indexPath row]; </span></span><br><span class="line"><span class="comment">&#125; </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="comment">//NS_AVAILABLE_IOS(8_0)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>tableView：editActionsForRowAtIndexPath    —– 自定义左滑动的编辑功能样式（UITableViewRowAction）</li>
<li>tableView：titleForDeleteConfirmationButtonForRowAtIndexPath   —— 改变默认左滑动出现的字样</li>
</ul>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112546279603.jpg"></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView canEditRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath </span><br><span class="line">&#123;    <span class="keyword">return</span> <span class="literal">YES</span>; </span><br><span class="line">&#125; </span><br><span class="line">- (<span class="built_in">UITableViewCellEditingStyle</span>)tableView:(<span class="built_in">UITableView</span> *)tableView editingStyleForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath </span><br><span class="line">&#123;    <span class="keyword">return</span> <span class="built_in">UITableViewCellEditingStyleDelete</span>; </span><br><span class="line">&#125; </span><br><span class="line">-(<span class="built_in">NSArray</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView editActionsForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123; </span><br><span class="line">    <span class="built_in">UITableViewRowAction</span> *layTopRowAction1 = [<span class="built_in">UITableViewRowAction</span> rowActionWithStyle:<span class="built_in">UITableViewRowActionStyleDestructive</span> title:<span class="string">@&quot;删除&quot;</span> handler:^(<span class="built_in">UITableViewRowAction</span> *action, <span class="built_in">NSIndexPath</span> *indexPath) &#123; </span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;点击了删除&quot;</span>); </span><br><span class="line">        [tableView setEditing:<span class="literal">NO</span> animated:<span class="literal">YES</span>]; </span><br><span class="line">    &#125;]; </span><br><span class="line">    layTopRowAction1.backgroundColor = [<span class="built_in">UIColor</span> redColor]; </span><br><span class="line">    <span class="built_in">UITableViewRowAction</span> *layTopRowAction2 = [<span class="built_in">UITableViewRowAction</span> rowActionWithStyle:<span class="built_in">UITableViewRowActionStyleDestructive</span> title:<span class="string">@&quot;置顶&quot;</span> handler:^(<span class="built_in">UITableViewRowAction</span> *action, <span class="built_in">NSIndexPath</span> *indexPath) &#123; </span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;点击了置顶&quot;</span>); </span><br><span class="line">        [tableView setEditing:<span class="literal">NO</span> animated:<span class="literal">YES</span>]; </span><br><span class="line">    &#125;]; </span><br><span class="line">    layTopRowAction2.backgroundColor = [<span class="built_in">UIColor</span> greenColor]; </span><br><span class="line">    <span class="built_in">UITableViewRowAction</span> *layTopRowAction3 = [<span class="built_in">UITableViewRowAction</span> rowActionWithStyle:<span class="built_in">UITableViewRowActionStyleDestructive</span> title:<span class="string">@&quot;更多&quot;</span> handler:^(<span class="built_in">UITableViewRowAction</span> *action, <span class="built_in">NSIndexPath</span> *indexPath) &#123; </span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;点击了更多&quot;</span>); </span><br><span class="line">        [tableView setEditing:<span class="literal">NO</span> animated:<span class="literal">YES</span>]; </span><br><span class="line">         </span><br><span class="line">    &#125;]; </span><br><span class="line">    layTopRowAction3.backgroundColor = [<span class="built_in">UIColor</span> blueColor]; </span><br><span class="line">    <span class="built_in">NSArray</span> *arr = @[layTopRowAction1,layTopRowAction2,layTopRowAction3]; </span><br><span class="line">    <span class="keyword">return</span> arr; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UITableViewDelegate代理方法： (iOS8以上)</p>
<p><code>tableView:willDisplayFooterView:forSection:</code>和<code>tableView:willDisplayHeaderView:forSection:</code>可以正常被调用<br>在iOS7（iOS6没测试）上却没有被调用<br>原来iOS7必须同时实现了Header和Footer这个delegate才会被调用所以</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForHeaderInSection:(<span class="built_in">NSInteger</span>)section  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.</span>f;  </span><br><span class="line">&#125;  </span><br><span class="line">   </span><br><span class="line">- (<span class="built_in">UIView</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView viewForHeaderInSection:(<span class="built_in">NSInteger</span>)section  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="built_in">UIView</span> *view = [<span class="built_in">UIView</span> new];  </span><br><span class="line">    view.backgroundColor = [<span class="built_in">UIColor</span> clearColor];  </span><br><span class="line">    <span class="keyword">return</span> view;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<ul>
<li>tableView:    willDisplayHeaderView: forSection:      ——–   设置当前section头的样式</li>
<li>tableView:  willDisplayCell：forRowAtIndexPath：———–设置当前的单元格<br><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112546839638.jpg"></li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView willDisplayCell:(<span class="built_in">UITableViewCell</span> *)cell forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath </span><br><span class="line">&#123; </span><br><span class="line">    cell.transform = <span class="built_in">CGAffineTransformMakeTranslation</span>(<span class="number">320</span>, <span class="number">0</span>); </span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:indexPath.row*<span class="number">0.2</span> animations:^&#123; </span><br><span class="line">        cell.transform = <span class="built_in">CGAffineTransformIdentity</span>; </span><br><span class="line">    &#125;]; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>tableView： heightForRowAtIndexPath：———–设置每行的高度</li>
<li>tableView：tableViewheightForHeaderInSection：———–设置组表的头标签高度</li>
<li>tableView：tableViewheightForFooterInSection：————-设置组表的尾标签高度</li>
<li>tableView： viewForHeaderInSection：———-自定义组表的头标签视图</li>
<li>tableView： viewForFooterInSection： ———-自定义组表的尾标签视图</li>
<li>tableView：accessoryButtonTappedForRowWithIndexPath：———–设置某个单元格上的右指向按钮的响应方法</li>
</ul>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15112547031648.jpg"></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="built_in">UIImage</span> *image= [ <span class="built_in">UIImage</span> imageNamed:<span class="string">@&quot;man&quot;</span> ];  </span><br><span class="line">    <span class="built_in">UIButton</span> *button = [ <span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span> ];  </span><br><span class="line">    <span class="built_in">CGRect</span> frame = <span class="built_in">CGRectMake</span>( <span class="number">0.0</span> , <span class="number">0.0</span> , image.size.width , image.size.height );  </span><br><span class="line">    button.frame = frame;  </span><br><span class="line">    [button setBackgroundImage:image forState:<span class="built_in">UIControlStateNormal</span> ];  </span><br><span class="line">    button.backgroundColor = [<span class="built_in">UIColor</span> clearColor ];  </span><br><span class="line">    [button addTarget:<span class="keyword">self</span>  </span><br><span class="line">               action:<span class="keyword">@selector</span>(accessoryButtonIsTapped:event:) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];  </span><br><span class="line">  </span><br><span class="line">- (<span class="type">void</span>)accessoryButtonIsTapped:(<span class="type">id</span>)sender event:(<span class="type">id</span>)event&#123;  </span><br><span class="line">    <span class="built_in">NSSet</span> *touches = [event allTouches];  </span><br><span class="line">    <span class="built_in">UITouch</span> *touch = [touches anyObject];  </span><br><span class="line">    <span class="built_in">CGPoint</span> currentTouchPosition = [touch locationInView:<span class="keyword">self</span>.tableView];  </span><br><span class="line">    <span class="built_in">NSIndexPath</span> *indexPath = [<span class="keyword">self</span>.tableView indexPathForRowAtPoint:currentTouchPosition];  </span><br><span class="line">    <span class="keyword">if</span>(indexPath != <span class="literal">nil</span>)  </span><br><span class="line">    &#123;  </span><br><span class="line">        [<span class="keyword">self</span> tableView:<span class="keyword">self</span>.tableView accessoryButtonTappedForRowWithIndexPath:indexPath];  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>tableView：willSelectRowAtIndexPath：———–获取将要选择的单元格的路径</li>
<li>tableView：didSelectRowAtIndexPath：———–获取选中的单元格的响应事件</li>
<li>tableView： tableViewwillDeselectRowAtIndexPath：————获取将要未选中的单元格的路径</li>
<li>tableView：didDeselectRowAtIndexPath：———–获取未选中的单元格响应事件NS_AVAILABLE_IOS(9_0)       </li>
<li>remembersLastFocusedIndexPath    ——–  使用Apple TV遥控器控制屏幕上的用户界面</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView canFocusRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">9</span>_0);  </span><br><span class="line">- (<span class="type">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView shouldUpdateFocusInContext:(<span class="built_in">UITableViewFocusUpdateContext</span> *)context <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">9</span>_0);  </span><br><span class="line">- (<span class="type">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didUpdateFocusInContext:(<span class="built_in">UITableViewFocusUpdateContext</span> *)context withAnimationCoordinator:(<span class="built_in">UIFocusAnimationCoordinator</span> *)coordinator <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">9</span>_0);  </span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSIndexPath</span> *)indexPathForPreferredFocusedViewInTableView:(<span class="built_in">UITableView</span> *)tableView <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">9</span>_0);  </span><br></pre></td></tr></table></figure>

<ul>
<li>cellLayoutMarginsFollowReadableWidth    ——- 判断是否需要根据内容留有空白</li>
</ul>
<h2 id="参考博文"><a href="#参考博文" class="headerlink" title="参考博文"></a>参考博文</h2><ol>
<li><a href="http://www.cnblogs.com/smileEvday/archive/2012/06/28/tableView.html">UITableView学习笔记</a></li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">MichaelMao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://michaelmaomao.github.io/2016/09/06/TableView%E7%B3%BB%E5%88%97--%E7%9F%A5%E8%AF%86%E7%82%B9/">http://michaelmaomao.github.io/2016/09/06/TableView%E7%B3%BB%E5%88%97--%E7%9F%A5%E8%AF%86%E7%82%B9/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://michaelMaoMao.github.io">MMao</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docs/">Docs</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="https://pic-mike.oss-cn-hongkong.aliyuncs.com/Blog/avatar.png"><div class="post-qr-code__desc">我要吐槽下</div></div></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2016/09/16/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/"><i class="fa fa-chevron-left">  </i><span>内存管理【翻译】</span></a></div><div class="next-post pull-right"><a href="/2016/08/14/%E5%AF%B9iOS%E6%B5%85%E6%8B%B7%E8%B4%9D,%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E7%90%86%E8%A7%A3/"><span>对iOS浅拷贝,深拷贝的理解</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitment-container"></div><script>var gitment = new Gitment({
  owner: 'michaelMaoMao',
  repo: 'michaelMaoMao.github.io',
  oauth: {
    client_id: '98760fb6521b1f01477f',
    client_secret: '88766f6b64e79c5427ddc39db6fa3c42ee19f6d9'
  }
})
gitment.render('gitment-container')</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2025 By MichaelMao</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Hi, this is just a small place for reflect.</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script><script src="/js/search/local-search.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>